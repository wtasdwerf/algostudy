# 김범수

# **라라와 용맥 변환**

> 출처 : [https://www.acmicpc.net/problem/29793](https://www.acmicpc.net/problem/29793)
> 

## 문제

> 
> 
> 
> 메이플스토리의 직업 라라는 **용맥 분출**이라는 스킬을 이용해 사냥한다.
> 
> 라라는 **해**, **강**, **바람**의 세 종류 용맥을 발견할 수 있는데, 용맥 분출을 사용하면 용맥을 **소모**하여 해당 위치에 지속적으로 데미지를 주는 **토지령**이라는 소환수를 소환할 수 있다. 토지령 역시 **해**, **강**, **바람**의 세 종류 토지령이 있고, 소모한 용맥과 같은 종류의 토지령이 소환된다. 각 토지령은 종류별로 한 마리씩만 소환할 수 있고, 토지령을 소환할 때 같은 종류의 토지령이 이미 소환되어 있다면 기존에 소환되어 있던 같은 종류의 토지령은 사라지고 종류별로 가장 마지막에 소환된 토지령만이 남는다.
> 
> 예를 들어 해의 토지령과 강의 토지령이 소환되어 있는 상태에서 용맥 분출로 바람 용맥을 소모했을 경우, 그 위치에 바람의 토지령이 소환된다. 그러나 여기서 해 용맥을 소모했을 경우, 기존에 있던 해의 토지령이 사라지고 새로운 해의 토지령이 소환된다. 강의 토지령과 바람의 토지령은 해의 토지령과는 종류가 다르기 때문에 사라지지 않는다.
> 
> 용맥 분출에는 한 가지 단점이 있는데, 적절한 종류의 용맥을 소모하지 못한다면 소환했던 토지령이 너무 빠르게 사라져 몬스터에게 충분한 데미지를 주지 못할 수도 있다. 이를 보완하기 위해 라라는 또 다른 스킬인 **용맥 변환**을 가지고 있다. 용맥 변환을 사용할 때마다 원하는 위치의 용맥 하나를 원하는 다른 종류의 용맥으로 변환할 수 있다.
> 
> 예를 들어 해 용맥, 해 용맥, 해 용맥이 순서대로 있는 상태에서 두 번째 용맥에 용맥 변환을 사용해 바람 용맥으로 변환할 수 있다. 이 경우 용맥의 배치는 해 용맥, 바람 용맥, 해 용맥이 된다. 이어서 세 번째 용맥에 용맥 변환을 사용해 강 용맥으로 변환할 경우, 용맥의 배치는 해 용맥, 바람 용맥, 강 용맥이 된다.
> 
> 라라는 N개의 용맥이 일렬로 있고, 각 용맥마다 체력이 H인 몬스터가 한 마리씩 있는 직선형 맵에서 사냥하려고 한다. 라라는 이 맵의 가장 왼쪽 용맥에서부터 시작하고, 다음과 같은 과정이 반복되어 사냥이 진행된다.
> 
> 1. 라라가 현재 위치한 곳의 용맥을 소모하여 용맥 분출을 한다. 소모한 용맥에 따른 토지령이 소환되고, 기존에 소환되어 있던 같은 종류의 토지령은 즉시 사라진다.
> 2. 현재 소환되어 있는 모든 토지령이 그 위치에 있는 몬스터에게 데미지를 주고, 체력을 1 감소시킨다. 몬스터의 체력이 0이 되었다면 그 몬스터는 처치된다.
> 3. 라라가 오른쪽으로 인접한 용맥으로 이동한다. 이동할 수 있다면 반드시 이동을 하고, 맵의 오른쪽 끝에 도달해 이동할 용맥이 없다면 현재 토지령이 소환되어 있는 위치의 몬스터가 모두 처치되고, 사냥을 끝마친다.
> 
> 라라는 맵에 있는 **모든** 몬스터를 처치하기 위해 사냥을 시작하기 전 용맥 변환으로 용맥의 종류를 바꿀 것이다. 단, 용맥 변환은 쿨타임이 있는 스킬이기 때문에 빠른 사냥을 위해 최소한의 횟수로 사용할 것이다.
> 
> 맵의 **모든** 몬스터를 처치하면서 용맥 변환을 최소한으로 사용할 때, 그 횟수를 라라에게 알려주자.
> 

## 풀이

```python
import sys

input = sys.stdin.readline

N, H = map(int, input().rstrip().split())
string = input().rstrip()
H = min(H, N) # N이 H보다 작으면 H를 N으로 대체해줘도 상관 없음

ans = 0

# H가 4 이상이면 불가능
if H >= 4:
    ans = -1
# H가 1이면 답은 항상 0
elif H == 1:
    ans = 0
# H가 2이면 이웃한 두 용맥이 다르면 된다.
elif H == 2:
    flag = False
    for i in range(len(string)-1):
        # flag가 True라는건 해당 위치에서는 두 용맥이 같지 않다는게 보장이 됨
        if flag:
            flag = False
            continue
        # 두 용맥이 같으면 (i+1)번째 용맥을 변환 시킴
        # 이 때 i, i+1번째와 i+1, i+2번째가 다르게 변환시킬 수 있으므로 flag를 True로 변경
        if string[i] == string[i+1]:
            ans += 1
            flag = True
# H가 3이면 이웃한 세 용맥이 다르면 된다.
# 이때는 용맥 문자열이 주기를 이루면 된다!
else:
    pattern = ["SRW", "SWR", "WSR", "WRS", "RSW", "RWS"]
    ans = int(1e9)
    for p in pattern:
        cur = 0
        for i in range(len(string)):
            cur += (p[i%3] != string[i])
        ans = min(ans, cur)

print(ans)
```

> 다음 관찰을 할 수 있습니다.
> 
- H가 N보다 작으면 H를 N으로 바꿔줘도 무방하다.
- H가 1이면 답은 항상 0이다.
- H가 2이면 i, i+1번째 용맥이 같으면 i+1번째를 바꿔 주는데 이때, i+2, i+1 번째도 서로 다르게 바꿀 수 있고 이렇게 바꾸는게 최소이다.
- H가 3이면 용맥이 주기가 3인 문자열이여야 한다. ex) SRWSRWSR…
- 즉, 경우의 수가 6가지가 나오고 그것들이랑 비교해서 최소를 구하면 된다.

## 의문점

## 배운점

> TIL
>